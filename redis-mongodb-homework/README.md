####2019-12-13
####备注：Redisd的作业在redisController中，还有页面在tempates中；mongodb的作业在UserContrller中。
####Redis +  mongodb笔记
####一、Redis和Memcache的相同点和不同点
     1、Redis和Memcache都是将数据存放在内存中，都是内存数据库。不过memcache还可用于缓存其他东西，例如图片、视频等等。 
     2、Redis不仅仅支持简单的k/v类型的数据，同时还提供list，set，hash等数据结构的存储。 
     3、虚拟内存–Redis当物理内存用完时，可以将一些很久没用到的value 交换到磁盘 。
     4、过期策略–memcache在set时就指定，例如set key1 0 0 8,即永不过期。Redis可以通过例如expire设定，例如expire name 10。 
     5、分布式–设定memcache集群，利用magent做一主多从;redis可以做一主多从。都可以一主一从。 
     6、存储数据安全–memcache挂掉后，数据没了；redis可以定期保存到磁盘（持久化）。 
     7、灾难恢复–memcache挂掉后，数据不可恢复; redis数据丢失后可以通过aof恢复。
     8、Redis支持数据的备份，即master-slave模式的数据备份。
     
     redis和memecache的不同在于： 
     1、存储方式： 
     memecache 把数据全部存在内存之中，断电后会挂掉，数据不能超过内存大小 
     redis有部份存在硬盘上，这样能保证数据的持久性，支持数据的持久化。 
     2、数据支持类型： 
     redis在数据支持上要比memecache多的多。 
     3、使用底层模型不同： 
     新版本的redis直接自己构建了VM 机制 ，因为一般的系统调用系统函数的话，会浪费一定的时间去移动和请求。 
     4、运行环境不同： 
     redis目前官方只支持LINUX 上去行，从而省去了对于其它系统的支持，这样的话可以更好的把精力用于本系统 环境上的优化，虽然后来微软有一个小组为其写了补丁，但是没有放到主干上。
     
 ####二、Redis和Memcache的应用场景
    有持久化需求或者对数据结构和处理有高级要求的应用，选择redis，其他简单的key/value存储，选择memcache。
    
 ####三、Redis的基本规范
     redis是一种高级的key-value的存储系统
     
     其中的key是字符串类型，尽可能满足如下几点：
     1）key不要太长，最好不要操作1024个字节，这不仅会消耗内存还会降低查找效率
     2）key不要太短，如果太短会降低key的可读性
     3）在项目中，key最好有一个统一的命名规范
 ####四、Redis的value支持五种数据类型
 ####    1）字符串型 string
     字符串类型是Redis中最为基础的数据存储类型，它在Redis中是二进制安全的，这便意味着该类型可以接受任何格式的数据，如JPEG图像数据或Json对象描述信息等。	
     在Redis中字符串类型的Value最多可以容纳的数据长度是512M                
 ####    2）字符串列表 list
     在Redis中，List类型是按照插入顺序排序的字符串链表。和数据结构中的普通链表一样，我们可以在其头部(left)和尾部(right)添加新的元素。
     在插入时，如果该键并不存在，Redis将为该键创建一个新的链表。与此相反，如果链表中所有的元素均被移除，那么该键也将会被从数据库中删除。
     List中可以包含的最大元素数量是4294967295。
     从元素插入和删除的效率视角来看，如果我们是在链表的两头插入或删除元素，这将会是非常高效的操作，即使链表中已经存储了百万条记录，该操作也可以在常量时间内完成。
     然而需要说明的是，如果元素插入或删除操作是作用于链表中间，那将会是非常低效的。相信对于有良好数据结构基础的开发者而言，这一点并不难理解。
 ####    3）字符串集合 set
     在Redis中，我们可以将Set类型看作为没有排序的字符集合，和List类型一样，我们也可以在该类型的数据值上执行添加、删除或判断某一元素是否存在等操作。
     需要说明的是，这些操作的时间是常量时间。Set可包含的最大元素数是4294967295。
     和List类型不同的是，Set集合中不允许出现重复的元素。和List类型相比，Set类型在功能上还存在着一个非常重要的特性，即在服务器端完成多个Sets之间的聚合计算操作，
     如unions、intersections和differences。由于这些操作均在服务端完成，因此效率极高，而且也节省了大量的网络IO开销。
 ####    4）有序字符串集合 sorted set
     Sorted-Set和Set类型极为相似，它们都是字符串的集合，都不允许重复的成员出现在一个Set中。它们之间的主要差别是Sorted-Sets中的每一个成员都会有一个分数(score)与之关联，
     Redis正是通过分数来为集合中的成员进行从小到大的排序。然而需要额外指出的是，尽管Sorted-Sets中的成员必须是唯一的，但是分数(score)却是可以重复的。
     在Sorted-Set中添加、删除或更新一个成员都是非常快速的操作，其时间复杂度为集合中成员数量的对数。由于Sorted-Sets中的成员在集合中的位置是有序的，
     因此，即便是访问位于集合中部的成员也仍然是非常高效的。事实上，Redis所具有的这一特征在很多其它类型的数据库中是很难实现的，
     换句话说，在该点上要想达到和Redis	同样的高效，在其它数据库中进行建模是非常困难的。
 ####    5）哈希类型 hash
     Redis中的Hashes类型可以看成具有String Key和String Value的map容器。所以该类型非常适合于存储值对象的信息。如Username、Password和Age等。
     如果Hash中包含很少的字段，那么该类型的数据也将仅占用很少的磁盘空间。每一个Hash可以存储4294967295个键值对。
